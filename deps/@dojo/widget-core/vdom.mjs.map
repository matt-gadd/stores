{"version":3,"file":"vdom.mjs","sourceRoot":"","sources":["../../src/vdom.ts"],"names":[],"mappings":"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","sourcesContent":["import global from '@dojo/shim/global';\nimport {\n\tCoreProperties,\n\tDefaultWidgetBaseInterface,\n\tDNode,\n\tVNode,\n\tWNode,\n\tProjectionOptions,\n\tProjection,\n\tSupportedClassName,\n\tTransitionStrategy,\n\tVNodeProperties\n} from './interfaces';\nimport { from as arrayFrom } from '@dojo/shim/array';\nimport { isWNode, isVNode, VNODE } from './d';\nimport { isWidgetBaseConstructor } from './Registry';\nimport WeakMap from '@dojo/shim/WeakMap';\nimport NodeHandler from './NodeHandler';\nimport RegistryHandler from './RegistryHandler';\n\nconst NAMESPACE_W3 = 'http://www.w3.org/';\nconst NAMESPACE_SVG = NAMESPACE_W3 + '2000/svg';\nconst NAMESPACE_XLINK = NAMESPACE_W3 + '1999/xlink';\n\nconst emptyArray: (InternalWNode | InternalVNode)[] = [];\n\nexport type RenderResult = DNode<any> | DNode<any>[];\n\nexport interface InternalWNode extends WNode<DefaultWidgetBaseInterface> {\n\t/**\n\t * The instance of the widget\n\t */\n\tinstance: DefaultWidgetBaseInterface;\n\n\t/**\n\t * The rendered DNodes from the instance\n\t */\n\trendered: InternalDNode[];\n\n\t/**\n\t * Core properties that are used by the widget core system\n\t */\n\tcoreProperties: CoreProperties;\n\n\t/**\n\t * Children for the WNode\n\t */\n\tchildren: InternalDNode[];\n}\n\nexport interface InternalVNode extends VNode {\n\t/**\n\t * Children for the VNode\n\t */\n\tchildren?: InternalDNode[];\n\n\tinserted?: boolean;\n\n\t/**\n\t * Bag used to still decorate properties on a deferred properties callback\n\t */\n\tdecoratedDeferredProperties?: VNodeProperties;\n\n\t/**\n\t * DOM element\n\t */\n\tdomNode?: Element | Text;\n}\n\nexport type InternalDNode = InternalVNode | InternalWNode;\n\nexport interface WidgetData {\n\tonElementCreated: Function;\n\tonElementUpdated: Function;\n\tonDetach: () => void;\n\tonAttach: () => void;\n\tparentInvalidate?: Function;\n\tdirty: boolean;\n\tregistry: () => RegistryHandler;\n\tnodeHandler: NodeHandler;\n\tcoreProperties: CoreProperties;\n\tinvalidate: Function;\n}\n\nexport const widgetInstanceMap = new WeakMap<any, WidgetData>();\n\nfunction same(dnode1: InternalDNode, dnode2: InternalDNode) {\n\tif (isVNode(dnode1) && isVNode(dnode2)) {\n\t\tif (dnode1.tag !== dnode2.tag) {\n\t\t\treturn false;\n\t\t}\n\t\tif (dnode1.properties.key !== dnode2.properties.key) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t} else if (isWNode(dnode1) && isWNode(dnode2)) {\n\t\tif (dnode1.widgetConstructor !== dnode2.widgetConstructor) {\n\t\t\treturn false;\n\t\t}\n\t\tif (dnode1.properties.key !== dnode2.properties.key) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nconst missingTransition = function() {\n\tthrow new Error('Provide a transitions object to the projectionOptions to do animations');\n};\n\nfunction getProjectionOptions(projectorOptions?: Partial<ProjectionOptions>): ProjectionOptions {\n\tconst defaults = {\n\t\tnamespace: undefined,\n\t\tstyleApplyer: function(domNode: HTMLElement, styleName: string, value: string) {\n\t\t\t(domNode.style as any)[styleName] = value;\n\t\t},\n\t\ttransitions: {\n\t\t\tenter: missingTransition,\n\t\t\texit: missingTransition\n\t\t},\n\t\tdeferredRenderCallbacks: [],\n\t\tafterRenderCallbacks: [],\n\t\tnodeMap: new WeakMap(),\n\t\tmerge: false\n\t};\n\treturn { ...defaults, ...projectorOptions } as ProjectionOptions;\n}\n\nfunction checkStyleValue(styleValue: Object) {\n\tif (typeof styleValue !== 'string') {\n\t\tthrow new Error('Style values must be strings');\n\t}\n}\n\nfunction updateEvents(\n\tdomNode: Node,\n\tpropName: string,\n\tproperties: VNodeProperties,\n\tprojectionOptions: ProjectionOptions,\n\tpreviousProperties?: VNodeProperties\n) {\n\tconst previous = previousProperties || Object.create(null);\n\tconst currentValue = properties[propName];\n\tconst previousValue = previous[propName];\n\n\tconst eventName = propName.substr(2);\n\tconst eventMap = projectionOptions.nodeMap.get(domNode) || new WeakMap();\n\n\tif (previousValue) {\n\t\tconst previousEvent = eventMap.get(previousValue);\n\t\tdomNode.removeEventListener(eventName, previousEvent);\n\t}\n\n\tlet callback = currentValue.bind(properties.bind);\n\n\tif (eventName === 'input') {\n\t\tcallback = function(this: any, evt: Event) {\n\t\t\tcurrentValue.call(this, evt);\n\t\t\t(evt.target as any)['oninput-value'] = (evt.target as HTMLInputElement).value;\n\t\t}.bind(properties.bind);\n\t}\n\n\tdomNode.addEventListener(eventName, callback);\n\teventMap.set(currentValue, callback);\n\tprojectionOptions.nodeMap.set(domNode, eventMap);\n}\n\nfunction addClasses(domNode: Element, classes: SupportedClassName) {\n\tif (classes) {\n\t\tconst classNames = classes.split(' ');\n\t\tfor (let i = 0; i < classNames.length; i++) {\n\t\t\tdomNode.classList.add(classNames[i]);\n\t\t}\n\t}\n}\n\nfunction removeClasses(domNode: Element, classes: SupportedClassName) {\n\tif (classes) {\n\t\tconst classNames = classes.split(' ');\n\t\tfor (let i = 0; i < classNames.length; i++) {\n\t\t\tdomNode.classList.remove(classNames[i]);\n\t\t}\n\t}\n}\n\nfunction setProperties(domNode: Element, properties: VNodeProperties, projectionOptions: ProjectionOptions) {\n\tconst propNames = Object.keys(properties);\n\tconst propCount = propNames.length;\n\tfor (let i = 0; i < propCount; i++) {\n\t\tconst propName = propNames[i];\n\t\tlet propValue = properties[propName];\n\t\tif (propName === 'classes') {\n\t\t\tconst currentClasses = Array.isArray(propValue) ? propValue : [propValue];\n\t\t\tif (!(domNode as Element).className) {\n\t\t\t\t(domNode as Element).className = currentClasses.join(' ').trim();\n\t\t\t} else {\n\t\t\t\tfor (let i = 0; i < currentClasses.length; i++) {\n\t\t\t\t\taddClasses(domNode as Element, currentClasses[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (propName === 'styles') {\n\t\t\tconst styleNames = Object.keys(propValue);\n\t\t\tconst styleCount = styleNames.length;\n\t\t\tfor (let j = 0; j < styleCount; j++) {\n\t\t\t\tconst styleName = styleNames[j];\n\t\t\t\tconst styleValue = propValue[styleName];\n\t\t\t\tif (styleValue) {\n\t\t\t\t\tcheckStyleValue(styleValue);\n\t\t\t\t\tprojectionOptions.styleApplyer!(domNode as HTMLElement, styleName, styleValue);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (propName !== 'key' && propValue !== null && propValue !== undefined) {\n\t\t\tconst type = typeof propValue;\n\t\t\tif (type === 'function' && propName.lastIndexOf('on', 0) === 0) {\n\t\t\t\tupdateEvents(domNode, propName, properties, projectionOptions);\n\t\t\t} else if (type === 'string' && propName !== 'value' && propName !== 'innerHTML') {\n\t\t\t\tif (projectionOptions.namespace === NAMESPACE_SVG && propName === 'href') {\n\t\t\t\t\t(domNode as Element).setAttributeNS(NAMESPACE_XLINK, propName, propValue);\n\t\t\t\t} else {\n\t\t\t\t\t(domNode as Element).setAttribute(propName, propValue);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t(domNode as any)[propName] = propValue;\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction removeOrphanedEvents(\n\tdomNode: Element,\n\tpreviousProperties: VNodeProperties,\n\tproperties: VNodeProperties,\n\tprojectionOptions: ProjectionOptions\n) {\n\tconst eventMap = projectionOptions.nodeMap.get(domNode);\n\tif (eventMap) {\n\t\tObject.keys(previousProperties).forEach((propName) => {\n\t\t\tif (propName.substr(0, 2) === 'on' && !properties[propName]) {\n\t\t\t\tconst eventCallback = eventMap.get(previousProperties[propName]);\n\t\t\t\tif (eventCallback) {\n\t\t\t\t\tdomNode.removeEventListener(propName.substr(2), eventCallback);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction updateProperties(\n\tdomNode: Element,\n\tpreviousProperties: VNodeProperties,\n\tproperties: VNodeProperties,\n\tprojectionOptions: ProjectionOptions\n) {\n\tlet propertiesUpdated = false;\n\tconst propNames = Object.keys(properties);\n\tconst propCount = propNames.length;\n\tif (propNames.indexOf('classes') === -1 && previousProperties.classes) {\n\t\tif (Array.isArray(previousProperties.classes)) {\n\t\t\tfor (let i = 0; i < previousProperties.classes.length; i++) {\n\t\t\t\tremoveClasses(domNode, previousProperties.classes[i]);\n\t\t\t}\n\t\t} else {\n\t\t\tremoveClasses(domNode, previousProperties.classes);\n\t\t}\n\t}\n\n\tremoveOrphanedEvents(domNode, previousProperties, properties, projectionOptions);\n\n\tfor (let i = 0; i < propCount; i++) {\n\t\tconst propName = propNames[i];\n\t\tlet propValue = properties[propName];\n\t\tconst previousValue = previousProperties![propName];\n\t\tif (propName === 'classes') {\n\t\t\tconst previousClasses = Array.isArray(previousValue) ? previousValue : [previousValue];\n\t\t\tconst currentClasses = Array.isArray(propValue) ? propValue : [propValue];\n\t\t\tif (previousClasses && previousClasses.length > 0) {\n\t\t\t\tif (!propValue || propValue.length === 0) {\n\t\t\t\t\tfor (let i = 0; i < previousClasses.length; i++) {\n\t\t\t\t\t\tremoveClasses(domNode, previousClasses[i]);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconst newClasses: (null | undefined | string)[] = [...currentClasses];\n\t\t\t\t\tfor (let i = 0; i < previousClasses.length; i++) {\n\t\t\t\t\t\tconst previousClassName = previousClasses[i];\n\t\t\t\t\t\tif (previousClassName) {\n\t\t\t\t\t\t\tconst classIndex = newClasses.indexOf(previousClassName);\n\t\t\t\t\t\t\tif (classIndex === -1) {\n\t\t\t\t\t\t\t\tremoveClasses(domNode, previousClassName);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tnewClasses.splice(classIndex, 1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfor (let i = 0; i < newClasses.length; i++) {\n\t\t\t\t\t\taddClasses(domNode, newClasses[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (let i = 0; i < currentClasses.length; i++) {\n\t\t\t\t\taddClasses(domNode, currentClasses[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (propName === 'styles') {\n\t\t\tconst styleNames = Object.keys(propValue);\n\t\t\tconst styleCount = styleNames.length;\n\t\t\tfor (let j = 0; j < styleCount; j++) {\n\t\t\t\tconst styleName = styleNames[j];\n\t\t\t\tconst newStyleValue = propValue[styleName];\n\t\t\t\tconst oldStyleValue = previousValue[styleName];\n\t\t\t\tif (newStyleValue === oldStyleValue) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tpropertiesUpdated = true;\n\t\t\t\tif (newStyleValue) {\n\t\t\t\t\tcheckStyleValue(newStyleValue);\n\t\t\t\t\tprojectionOptions.styleApplyer!(domNode as HTMLElement, styleName, newStyleValue);\n\t\t\t\t} else {\n\t\t\t\t\tprojectionOptions.styleApplyer!(domNode as HTMLElement, styleName, '');\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (!propValue && typeof previousValue === 'string') {\n\t\t\t\tpropValue = '';\n\t\t\t}\n\t\t\tif (propName === 'value') {\n\t\t\t\tconst domValue = (domNode as any)[propName];\n\t\t\t\tif (\n\t\t\t\t\tdomValue !== propValue &&\n\t\t\t\t\t((domNode as any)['oninput-value']\n\t\t\t\t\t\t? domValue === (domNode as any)['oninput-value']\n\t\t\t\t\t\t: propValue !== previousValue)\n\t\t\t\t) {\n\t\t\t\t\t(domNode as any)[propName] = propValue;\n\t\t\t\t\t(domNode as any)['oninput-value'] = undefined;\n\t\t\t\t}\n\t\t\t\tif (propValue !== previousValue) {\n\t\t\t\t\tpropertiesUpdated = true;\n\t\t\t\t}\n\t\t\t} else if (propValue !== previousValue) {\n\t\t\t\tconst type = typeof propValue;\n\t\t\t\tif (type === 'function' && propName.lastIndexOf('on', 0) === 0) {\n\t\t\t\t\tupdateEvents(domNode, propName, properties, projectionOptions, previousProperties);\n\t\t\t\t} else if (type === 'string' && propName !== 'innerHTML') {\n\t\t\t\t\tif (projectionOptions.namespace === NAMESPACE_SVG && propName === 'href') {\n\t\t\t\t\t\tdomNode.setAttributeNS(NAMESPACE_XLINK, propName, propValue);\n\t\t\t\t\t} else if (propName === 'role' && propValue === '') {\n\t\t\t\t\t\tdomNode.removeAttribute(propName);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdomNode.setAttribute(propName, propValue);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif ((domNode as any)[propName] !== propValue) {\n\t\t\t\t\t\t// Comparison is here for side-effects in Edge with scrollLeft and scrollTop\n\t\t\t\t\t\t(domNode as any)[propName] = propValue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tpropertiesUpdated = true;\n\t\t\t}\n\t\t}\n\t}\n\treturn propertiesUpdated;\n}\n\nfunction findIndexOfChild(children: InternalDNode[], sameAs: InternalDNode, start: number) {\n\tfor (let i = start; i < children.length; i++) {\n\t\tif (same(children[i], sameAs)) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n}\n\nexport function toParentVNode(domNode: Element): InternalVNode {\n\treturn {\n\t\ttag: '',\n\t\tproperties: {},\n\t\tchildren: undefined,\n\t\tdomNode,\n\t\ttype: VNODE\n\t};\n}\n\nexport function toTextVNode(data: any): InternalVNode {\n\treturn {\n\t\ttag: '',\n\t\tproperties: {},\n\t\tchildren: undefined,\n\t\ttext: `${data}`,\n\t\tdomNode: undefined,\n\t\ttype: VNODE\n\t};\n}\n\nexport function filterAndDecorateChildren(\n\tchildren: undefined | DNode | DNode[],\n\tinstance: DefaultWidgetBaseInterface\n): InternalDNode[] {\n\tif (children === undefined) {\n\t\treturn emptyArray;\n\t}\n\tchildren = Array.isArray(children) ? children : [children];\n\n\tfor (let i = 0; i < children.length; ) {\n\t\tconst child = children[i] as InternalDNode;\n\t\tif (child === undefined || child === null) {\n\t\t\tchildren.splice(i, 1);\n\t\t\tcontinue;\n\t\t} else if (typeof child === 'string') {\n\t\t\tchildren[i] = toTextVNode(child);\n\t\t} else {\n\t\t\tif (isVNode(child)) {\n\t\t\t\tif (child.properties.bind === undefined) {\n\t\t\t\t\t(child.properties as any).bind = instance;\n\t\t\t\t\tif (child.children && child.children.length > 0) {\n\t\t\t\t\t\tfilterAndDecorateChildren(child.children, instance);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!child.coreProperties) {\n\t\t\t\t\tconst instanceData = widgetInstanceMap.get(instance)!;\n\t\t\t\t\tchild.coreProperties = {\n\t\t\t\t\t\tbind: instance,\n\t\t\t\t\t\tbaseRegistry: instanceData.coreProperties.baseRegistry\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tif (child.children && child.children.length > 0) {\n\t\t\t\t\tfilterAndDecorateChildren(child.children, instance);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\ti++;\n\t}\n\treturn children as InternalDNode[];\n}\n\nfunction nodeAdded(dnode: InternalDNode, transitions: TransitionStrategy) {\n\tif (isVNode(dnode) && dnode.properties) {\n\t\tconst enterAnimation = dnode.properties.enterAnimation;\n\t\tif (enterAnimation) {\n\t\t\tif (typeof enterAnimation === 'function') {\n\t\t\t\tenterAnimation(dnode.domNode as Element, dnode.properties);\n\t\t\t} else {\n\t\t\t\ttransitions.enter(dnode.domNode as Element, dnode.properties, enterAnimation as string);\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction callOnDetach(dNodes: InternalDNode | InternalDNode[], parentInstance: DefaultWidgetBaseInterface): void {\n\tdNodes = Array.isArray(dNodes) ? dNodes : [dNodes];\n\tfor (let i = 0; i < dNodes.length; i++) {\n\t\tconst dNode = dNodes[i];\n\t\tif (isWNode(dNode)) {\n\t\t\tif (dNode.rendered) {\n\t\t\t\tcallOnDetach(dNode.rendered, dNode.instance);\n\t\t\t}\n\t\t\tconst instanceData = widgetInstanceMap.get(dNode.instance)!;\n\t\t\tinstanceData.onDetach();\n\t\t} else {\n\t\t\tif (dNode.children) {\n\t\t\t\tcallOnDetach(dNode.children as InternalDNode[], parentInstance);\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction nodeToRemove(dnode: InternalDNode, transitions: TransitionStrategy, projectionOptions: ProjectionOptions) {\n\tif (isWNode(dnode)) {\n\t\tconst rendered = dnode.rendered || emptyArray;\n\t\tfor (let i = 0; i < rendered.length; i++) {\n\t\t\tconst child = rendered[i];\n\t\t\tif (isVNode(child)) {\n\t\t\t\tchild.domNode!.parentNode!.removeChild(child.domNode!);\n\t\t\t} else {\n\t\t\t\tnodeToRemove(child, transitions, projectionOptions);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tconst domNode = dnode.domNode;\n\t\tconst properties = dnode.properties;\n\t\tconst exitAnimation = properties.exitAnimation;\n\t\tif (properties && exitAnimation) {\n\t\t\t(domNode as HTMLElement).style.pointerEvents = 'none';\n\t\t\tconst removeDomNode = function() {\n\t\t\t\tdomNode && domNode.parentNode && domNode.parentNode.removeChild(domNode);\n\t\t\t};\n\t\t\tif (typeof exitAnimation === 'function') {\n\t\t\t\texitAnimation(domNode as Element, removeDomNode, properties);\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\ttransitions.exit(dnode.domNode as Element, properties, exitAnimation as string, removeDomNode);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tdomNode && domNode.parentNode && domNode.parentNode.removeChild(domNode);\n\t}\n}\n\nfunction checkDistinguishable(\n\tchildNodes: InternalDNode[],\n\tindexToCheck: number,\n\tparentInstance: DefaultWidgetBaseInterface\n) {\n\tconst childNode = childNodes[indexToCheck];\n\tif (isVNode(childNode) && childNode.tag === '') {\n\t\treturn; // Text nodes need not be distinguishable\n\t}\n\tconst { key } = childNode.properties;\n\n\tif (key === undefined || key === null) {\n\t\tfor (let i = 0; i < childNodes.length; i++) {\n\t\t\tif (i !== indexToCheck) {\n\t\t\t\tconst node = childNodes[i];\n\t\t\t\tif (same(node, childNode)) {\n\t\t\t\t\tlet nodeIdentifier: string;\n\t\t\t\t\tconst parentName = (parentInstance as any).constructor.name || 'unknown';\n\t\t\t\t\tif (isWNode(childNode)) {\n\t\t\t\t\t\tnodeIdentifier = (childNode.widgetConstructor as any).name || 'unknown';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnodeIdentifier = childNode.tag;\n\t\t\t\t\t}\n\n\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t`A widget (${parentName}) has had a child addded or removed, but they were not able to uniquely identified. It is recommended to provide a unique 'key' property when using the same widget or element (${nodeIdentifier}) multiple times as siblings`\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction updateChildren(\n\tparentVNode: InternalVNode,\n\toldChildren: InternalDNode[],\n\tnewChildren: InternalDNode[],\n\tparentInstance: DefaultWidgetBaseInterface,\n\tprojectionOptions: ProjectionOptions\n) {\n\toldChildren = oldChildren || emptyArray;\n\tnewChildren = newChildren;\n\tconst oldChildrenLength = oldChildren.length;\n\tconst newChildrenLength = newChildren.length;\n\tconst transitions = projectionOptions.transitions!;\n\n\tlet oldIndex = 0;\n\tlet newIndex = 0;\n\tlet i: number;\n\tlet textUpdated = false;\n\twhile (newIndex < newChildrenLength) {\n\t\tconst oldChild = oldIndex < oldChildrenLength ? oldChildren[oldIndex] : undefined;\n\t\tconst newChild = newChildren[newIndex];\n\n\t\tif (oldChild !== undefined && same(oldChild, newChild)) {\n\t\t\ttextUpdated = updateDom(oldChild, newChild, projectionOptions, parentVNode, parentInstance) || textUpdated;\n\t\t\toldIndex++;\n\t\t} else {\n\t\t\tconst findOldIndex = findIndexOfChild(oldChildren, newChild, oldIndex + 1);\n\t\t\tif (findOldIndex >= 0) {\n\t\t\t\tfor (i = oldIndex; i < findOldIndex; i++) {\n\t\t\t\t\tconst oldChild = oldChildren[i];\n\t\t\t\t\tconst indexToCheck = i;\n\t\t\t\t\tprojectionOptions.afterRenderCallbacks.push(() => {\n\t\t\t\t\t\tcallOnDetach(oldChild, parentInstance);\n\t\t\t\t\t\tcheckDistinguishable(oldChildren, indexToCheck, parentInstance);\n\t\t\t\t\t});\n\t\t\t\t\tnodeToRemove(oldChildren[i], transitions, projectionOptions);\n\t\t\t\t}\n\t\t\t\ttextUpdated =\n\t\t\t\t\tupdateDom(oldChildren[findOldIndex], newChild, projectionOptions, parentVNode, parentInstance) ||\n\t\t\t\t\ttextUpdated;\n\t\t\t\toldIndex = findOldIndex + 1;\n\t\t\t} else {\n\t\t\t\tlet insertBefore: Element | Text | undefined = undefined;\n\t\t\t\tlet child: InternalDNode = oldChildren[oldIndex];\n\t\t\t\tif (child) {\n\t\t\t\t\tlet nextIndex = oldIndex + 1;\n\t\t\t\t\twhile (insertBefore === undefined) {\n\t\t\t\t\t\tif (isWNode(child)) {\n\t\t\t\t\t\t\tif (child.rendered) {\n\t\t\t\t\t\t\t\tchild = child.rendered[0];\n\t\t\t\t\t\t\t} else if (oldChildren[nextIndex]) {\n\t\t\t\t\t\t\t\tchild = oldChildren[nextIndex];\n\t\t\t\t\t\t\t\tnextIndex++;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tinsertBefore = child.domNode;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcreateDom(newChild, parentVNode, insertBefore, projectionOptions, parentInstance);\n\t\t\t\tnodeAdded(newChild, transitions);\n\t\t\t\tconst indexToCheck = newIndex;\n\t\t\t\tprojectionOptions.afterRenderCallbacks.push(() => {\n\t\t\t\t\tcheckDistinguishable(newChildren, indexToCheck, parentInstance);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tnewIndex++;\n\t}\n\tif (oldChildrenLength > oldIndex) {\n\t\t// Remove child fragments\n\t\tfor (i = oldIndex; i < oldChildrenLength; i++) {\n\t\t\tconst oldChild = oldChildren[i];\n\t\t\tconst indexToCheck = i;\n\t\t\tprojectionOptions.afterRenderCallbacks.push(() => {\n\t\t\t\tcallOnDetach(oldChild, parentInstance);\n\t\t\t\tcheckDistinguishable(oldChildren, indexToCheck, parentInstance);\n\t\t\t});\n\t\t\tnodeToRemove(oldChildren[i], transitions, projectionOptions);\n\t\t}\n\t}\n\treturn textUpdated;\n}\n\nfunction addChildren(\n\tparentVNode: InternalVNode,\n\tchildren: InternalDNode[] | undefined,\n\tprojectionOptions: ProjectionOptions,\n\tparentInstance: DefaultWidgetBaseInterface,\n\tinsertBefore: Element | Text | undefined = undefined,\n\tchildNodes?: (Element | Text)[]\n) {\n\tif (children === undefined) {\n\t\treturn;\n\t}\n\n\tif (projectionOptions.merge && childNodes === undefined) {\n\t\tchildNodes = arrayFrom(parentVNode.domNode!.childNodes) as (Element | Text)[];\n\t}\n\n\tfor (let i = 0; i < children.length; i++) {\n\t\tconst child = children[i];\n\n\t\tif (isVNode(child)) {\n\t\t\tif (projectionOptions.merge && childNodes) {\n\t\t\t\tlet domElement: Element | undefined = undefined;\n\t\t\t\twhile (child.domNode === undefined && childNodes.length > 0) {\n\t\t\t\t\tdomElement = childNodes.shift() as Element;\n\t\t\t\t\tif (domElement && domElement.tagName === (child.tag.toUpperCase() || undefined)) {\n\t\t\t\t\t\tchild.domNode = domElement;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tcreateDom(child, parentVNode, insertBefore, projectionOptions, parentInstance);\n\t\t} else {\n\t\t\tcreateDom(child, parentVNode, insertBefore, projectionOptions, parentInstance, childNodes);\n\t\t}\n\t}\n}\n\nfunction initPropertiesAndChildren(\n\tdomNode: Element,\n\tdnode: InternalVNode,\n\tparentInstance: DefaultWidgetBaseInterface,\n\tprojectionOptions: ProjectionOptions\n) {\n\taddChildren(dnode, dnode.children, projectionOptions, parentInstance, undefined);\n\tif (typeof dnode.deferredPropertiesCallback === 'function') {\n\t\taddDeferredProperties(dnode, projectionOptions);\n\t}\n\tsetProperties(domNode, dnode.properties, projectionOptions);\n\tif (dnode.properties.key !== null && dnode.properties.key !== undefined) {\n\t\tconst instanceData = widgetInstanceMap.get(parentInstance)!;\n\t\tinstanceData.nodeHandler.add(domNode as HTMLElement, `${dnode.properties.key}`);\n\t\tprojectionOptions.afterRenderCallbacks.push(() => {\n\t\t\tinstanceData.onElementCreated(domNode as HTMLElement, dnode.properties.key!);\n\t\t});\n\t}\n\tdnode.inserted = true;\n}\n\nfunction createDom(\n\tdnode: InternalDNode,\n\tparentVNode: InternalVNode,\n\tinsertBefore: Element | Text | undefined,\n\tprojectionOptions: ProjectionOptions,\n\tparentInstance: DefaultWidgetBaseInterface,\n\tchildNodes?: (Element | Text)[]\n) {\n\tlet domNode: Element | Text | undefined;\n\tif (isWNode(dnode)) {\n\t\tlet { widgetConstructor } = dnode;\n\t\tconst parentInstanceData = widgetInstanceMap.get(parentInstance)!;\n\t\tif (!isWidgetBaseConstructor<DefaultWidgetBaseInterface>(widgetConstructor)) {\n\t\t\tconst item = parentInstanceData.registry().get<DefaultWidgetBaseInterface>(widgetConstructor);\n\t\t\tif (item === null) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\twidgetConstructor = item;\n\t\t}\n\t\tconst instance = new widgetConstructor();\n\t\tdnode.instance = instance;\n\t\tconst instanceData = widgetInstanceMap.get(instance)!;\n\t\tinstanceData.parentInvalidate = parentInstanceData.invalidate;\n\t\tinstance.__setCoreProperties__(dnode.coreProperties);\n\t\tinstance.__setChildren__(dnode.children);\n\t\tinstance.__setProperties__(dnode.properties);\n\t\tconst rendered = instance.__render__();\n\t\tif (rendered) {\n\t\t\tconst filteredRendered = filterAndDecorateChildren(rendered, instance);\n\t\t\tdnode.rendered = filteredRendered;\n\t\t\taddChildren(parentVNode, filteredRendered, projectionOptions, instance, insertBefore, childNodes);\n\t\t}\n\t\tinstanceData.nodeHandler.addRoot();\n\t\tprojectionOptions.afterRenderCallbacks.push(() => {\n\t\t\tinstanceData.onAttach();\n\t\t});\n\t} else {\n\t\tif (projectionOptions.merge && projectionOptions.mergeElement !== undefined) {\n\t\t\tdomNode = dnode.domNode = projectionOptions.mergeElement;\n\t\t\tprojectionOptions.mergeElement = undefined;\n\t\t\tinitPropertiesAndChildren(domNode!, dnode, parentInstance, projectionOptions);\n\t\t\treturn;\n\t\t}\n\t\tconst doc = parentVNode.domNode!.ownerDocument;\n\t\tif (dnode.tag === '') {\n\t\t\tif (dnode.domNode !== undefined) {\n\t\t\t\tconst newDomNode = dnode.domNode.ownerDocument.createTextNode(dnode.text!);\n\t\t\t\tdnode.domNode.parentNode!.replaceChild(newDomNode, dnode.domNode);\n\t\t\t\tdnode.domNode = newDomNode;\n\t\t\t} else {\n\t\t\t\tdomNode = dnode.domNode = doc.createTextNode(dnode.text!);\n\t\t\t\tif (insertBefore !== undefined) {\n\t\t\t\t\tparentVNode.domNode!.insertBefore(domNode, insertBefore);\n\t\t\t\t} else {\n\t\t\t\t\tparentVNode.domNode!.appendChild(domNode);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (dnode.domNode === undefined) {\n\t\t\t\tif (dnode.tag === 'svg') {\n\t\t\t\t\tprojectionOptions = { ...projectionOptions, ...{ namespace: NAMESPACE_SVG } };\n\t\t\t\t}\n\t\t\t\tif (projectionOptions.namespace !== undefined) {\n\t\t\t\t\tdomNode = dnode.domNode = doc.createElementNS(projectionOptions.namespace, dnode.tag);\n\t\t\t\t} else {\n\t\t\t\t\tdomNode = dnode.domNode = dnode.domNode || doc.createElement(dnode.tag);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdomNode = dnode.domNode;\n\t\t\t}\n\t\t\tinitPropertiesAndChildren(domNode! as Element, dnode, parentInstance, projectionOptions);\n\t\t\tif (insertBefore !== undefined) {\n\t\t\t\tparentVNode.domNode!.insertBefore(domNode, insertBefore);\n\t\t\t} else if (domNode!.parentNode !== parentVNode.domNode!) {\n\t\t\t\tparentVNode.domNode!.appendChild(domNode);\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction updateDom(\n\tprevious: any,\n\tdnode: InternalDNode,\n\tprojectionOptions: ProjectionOptions,\n\tparentVNode: InternalVNode,\n\tparentInstance: DefaultWidgetBaseInterface\n) {\n\tif (isWNode(dnode)) {\n\t\tconst { instance, rendered: previousRendered } = previous;\n\t\tif (instance && previousRendered) {\n\t\t\tconst instanceData = widgetInstanceMap.get(instance)!;\n\t\t\tinstance.__setCoreProperties__(dnode.coreProperties);\n\t\t\tinstance.__setChildren__(dnode.children);\n\t\t\tinstance.__setProperties__(dnode.properties);\n\t\t\tdnode.instance = instance;\n\t\t\tif (instanceData.dirty === true) {\n\t\t\t\tconst rendered = instance.__render__();\n\t\t\t\tdnode.rendered = filterAndDecorateChildren(rendered, instance);\n\t\t\t\tupdateChildren(parentVNode, previousRendered, dnode.rendered, instance, projectionOptions);\n\t\t\t} else {\n\t\t\t\tdnode.rendered = previousRendered;\n\t\t\t}\n\t\t\tinstanceData.nodeHandler.addRoot();\n\t\t} else {\n\t\t\tcreateDom(dnode, parentVNode, undefined, projectionOptions, parentInstance);\n\t\t}\n\t} else {\n\t\tif (previous === dnode) {\n\t\t\treturn false;\n\t\t}\n\t\tconst domNode = (dnode.domNode = previous.domNode);\n\t\tlet textUpdated = false;\n\t\tlet updated = false;\n\t\tdnode.inserted = previous.inserted;\n\t\tif (dnode.tag === '') {\n\t\t\tif (dnode.text !== previous.text) {\n\t\t\t\tconst newDomNode = domNode.ownerDocument.createTextNode(dnode.text!);\n\t\t\t\tdomNode.parentNode!.replaceChild(newDomNode, domNode);\n\t\t\t\tdnode.domNode = newDomNode;\n\t\t\t\ttextUpdated = true;\n\t\t\t\treturn textUpdated;\n\t\t\t}\n\t\t} else {\n\t\t\tif (dnode.tag.lastIndexOf('svg', 0) === 0) {\n\t\t\t\tprojectionOptions = { ...projectionOptions, ...{ namespace: NAMESPACE_SVG } };\n\t\t\t}\n\t\t\tif (previous.children !== dnode.children) {\n\t\t\t\tconst children = filterAndDecorateChildren(dnode.children, parentInstance);\n\t\t\t\tdnode.children = children;\n\t\t\t\tupdated =\n\t\t\t\t\tupdateChildren(dnode, previous.children, children, parentInstance, projectionOptions) || updated;\n\t\t\t}\n\n\t\t\tif (typeof dnode.deferredPropertiesCallback === 'function') {\n\t\t\t\taddDeferredProperties(dnode, projectionOptions);\n\t\t\t}\n\n\t\t\tupdated = updateProperties(domNode, previous.properties, dnode.properties, projectionOptions) || updated;\n\n\t\t\tif (dnode.properties.key !== null && dnode.properties.key !== undefined) {\n\t\t\t\tconst instanceData = widgetInstanceMap.get(parentInstance)!;\n\t\t\t\tinstanceData.nodeHandler.add(domNode, `${dnode.properties.key}`);\n\t\t\t\tprojectionOptions.afterRenderCallbacks.push(() => {\n\t\t\t\t\tinstanceData.onElementUpdated(domNode as HTMLElement, dnode.properties.key!);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tif (updated && dnode.properties && dnode.properties.updateAnimation) {\n\t\t\tdnode.properties.updateAnimation(domNode as Element, dnode.properties, previous.properties);\n\t\t}\n\t\treturn textUpdated;\n\t}\n}\n\nfunction addDeferredProperties(vnode: InternalVNode, projectionOptions: ProjectionOptions) {\n\t// transfer any properties that have been passed - as these must be decorated properties\n\tvnode.decoratedDeferredProperties = vnode.properties;\n\tconst properties = vnode.deferredPropertiesCallback!(!!vnode.inserted);\n\tvnode.properties = { ...properties, ...vnode.decoratedDeferredProperties };\n\tprojectionOptions.deferredRenderCallbacks.push(() => {\n\t\tconst properties = {\n\t\t\t...vnode.deferredPropertiesCallback!(!!vnode.inserted),\n\t\t\t...vnode.decoratedDeferredProperties\n\t\t};\n\t\tupdateProperties(vnode.domNode! as Element, vnode.properties, properties, projectionOptions);\n\t\tvnode.properties = properties;\n\t});\n}\n\nfunction runDeferredRenderCallbacks(projectionOptions: ProjectionOptions) {\n\tif (projectionOptions.deferredRenderCallbacks.length) {\n\t\tif (projectionOptions.sync) {\n\t\t\twhile (projectionOptions.deferredRenderCallbacks.length) {\n\t\t\t\tconst callback = projectionOptions.deferredRenderCallbacks.shift();\n\t\t\t\tcallback && callback();\n\t\t\t}\n\t\t} else {\n\t\t\tglobal.requestAnimationFrame(() => {\n\t\t\t\twhile (projectionOptions.deferredRenderCallbacks.length) {\n\t\t\t\t\tconst callback = projectionOptions.deferredRenderCallbacks.shift();\n\t\t\t\t\tcallback && callback();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n\nfunction runAfterRenderCallbacks(projectionOptions: ProjectionOptions) {\n\tif (projectionOptions.sync) {\n\t\twhile (projectionOptions.afterRenderCallbacks.length) {\n\t\t\tconst callback = projectionOptions.afterRenderCallbacks.shift();\n\t\t\tcallback && callback();\n\t\t}\n\t} else {\n\t\tif (global.requestIdleCallback) {\n\t\t\tglobal.requestIdleCallback(() => {\n\t\t\t\twhile (projectionOptions.afterRenderCallbacks.length) {\n\t\t\t\t\tconst callback = projectionOptions.afterRenderCallbacks.shift();\n\t\t\t\t\tcallback && callback();\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tsetTimeout(() => {\n\t\t\t\twhile (projectionOptions.afterRenderCallbacks.length) {\n\t\t\t\t\tconst callback = projectionOptions.afterRenderCallbacks.shift();\n\t\t\t\t\tcallback && callback();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n\nfunction createProjection(\n\tdnode: InternalDNode | InternalDNode[],\n\tparentInstance: DefaultWidgetBaseInterface,\n\tprojectionOptions: ProjectionOptions\n): Projection {\n\tlet projectionDNode = Array.isArray(dnode) ? dnode : [dnode];\n\tprojectionOptions.merge = false;\n\treturn {\n\t\tupdate: function(updatedDNode: RenderResult) {\n\t\t\tlet domNode = projectionOptions.rootNode;\n\n\t\t\tupdatedDNode = filterAndDecorateChildren(updatedDNode, parentInstance);\n\t\t\tupdateChildren(\n\t\t\t\ttoParentVNode(domNode),\n\t\t\t\tprojectionDNode,\n\t\t\t\tupdatedDNode as InternalDNode[],\n\t\t\t\tparentInstance,\n\t\t\t\tprojectionOptions\n\t\t\t);\n\t\t\tconst instanceData = widgetInstanceMap.get(parentInstance)!;\n\t\t\tinstanceData.nodeHandler.addRoot();\n\t\t\trunDeferredRenderCallbacks(projectionOptions);\n\t\t\trunAfterRenderCallbacks(projectionOptions);\n\t\t\tprojectionDNode = updatedDNode as InternalDNode[];\n\t\t},\n\t\tdomNode: projectionOptions.rootNode\n\t};\n}\n\nexport const dom = {\n\tcreate: function(\n\t\tdNode: RenderResult,\n\t\tinstance: DefaultWidgetBaseInterface,\n\t\tprojectionOptions?: Partial<ProjectionOptions>\n\t): Projection {\n\t\tconst finalProjectorOptions = getProjectionOptions(projectionOptions);\n\t\tconst rootNode = document.createElement('div');\n\t\tfinalProjectorOptions.rootNode = rootNode;\n\t\tconst decoratedNode = filterAndDecorateChildren(dNode, instance);\n\t\taddChildren(\n\t\t\ttoParentVNode(finalProjectorOptions.rootNode),\n\t\t\tdecoratedNode,\n\t\t\tfinalProjectorOptions,\n\t\t\tinstance,\n\t\t\tundefined\n\t\t);\n\t\tconst instanceData = widgetInstanceMap.get(instance)!;\n\t\tinstanceData.nodeHandler.addRoot();\n\t\tfinalProjectorOptions.afterRenderCallbacks.push(() => {\n\t\t\tinstanceData.onAttach();\n\t\t});\n\t\trunDeferredRenderCallbacks(finalProjectorOptions);\n\t\trunAfterRenderCallbacks(finalProjectorOptions);\n\t\treturn createProjection(decoratedNode, instance, finalProjectorOptions);\n\t},\n\tappend: function(\n\t\tparentNode: Element,\n\t\tdNode: RenderResult,\n\t\tinstance: DefaultWidgetBaseInterface,\n\t\tprojectionOptions?: Partial<ProjectionOptions>\n\t): Projection {\n\t\tconst finalProjectorOptions = getProjectionOptions(projectionOptions);\n\t\tfinalProjectorOptions.rootNode = parentNode;\n\t\tconst decoratedNode = filterAndDecorateChildren(dNode, instance);\n\t\taddChildren(\n\t\t\ttoParentVNode(finalProjectorOptions.rootNode),\n\t\t\tdecoratedNode,\n\t\t\tfinalProjectorOptions,\n\t\t\tinstance,\n\t\t\tundefined\n\t\t);\n\t\tconst instanceData = widgetInstanceMap.get(instance)!;\n\t\tinstanceData.nodeHandler.addRoot();\n\t\tfinalProjectorOptions.afterRenderCallbacks.push(() => {\n\t\t\tinstanceData.onAttach();\n\t\t});\n\t\trunDeferredRenderCallbacks(finalProjectorOptions);\n\t\trunAfterRenderCallbacks(finalProjectorOptions);\n\t\treturn createProjection(decoratedNode, instance, finalProjectorOptions);\n\t},\n\tmerge: function(\n\t\telement: Element,\n\t\tdNode: RenderResult,\n\t\tinstance: DefaultWidgetBaseInterface,\n\t\tprojectionOptions?: Partial<ProjectionOptions>\n\t): Projection {\n\t\tif (Array.isArray(dNode)) {\n\t\t\tthrow new Error('Unable to merge an array of nodes. (consider adding one extra level to the virtual DOM)');\n\t\t}\n\t\tconst finalProjectorOptions = getProjectionOptions(projectionOptions);\n\t\tfinalProjectorOptions.merge = true;\n\t\tfinalProjectorOptions.mergeElement = element;\n\t\tfinalProjectorOptions.rootNode = element.parentNode as Element;\n\t\tconst decoratedNode = filterAndDecorateChildren(dNode, instance)[0] as InternalVNode;\n\t\tcreateDom(\n\t\t\tdecoratedNode,\n\t\t\ttoParentVNode(finalProjectorOptions.rootNode),\n\t\t\tundefined,\n\t\t\tfinalProjectorOptions,\n\t\t\tinstance\n\t\t);\n\t\tconst instanceData = widgetInstanceMap.get(instance)!;\n\t\tinstanceData.nodeHandler.addRoot();\n\t\tfinalProjectorOptions.afterRenderCallbacks.push(() => {\n\t\t\tinstanceData.onAttach();\n\t\t});\n\t\trunDeferredRenderCallbacks(finalProjectorOptions);\n\t\trunAfterRenderCallbacks(finalProjectorOptions);\n\t\treturn createProjection(decoratedNode, instance, finalProjectorOptions);\n\t},\n\treplace: function(\n\t\telement: Element,\n\t\tdNode: RenderResult,\n\t\tinstance: DefaultWidgetBaseInterface,\n\t\tprojectionOptions?: Partial<ProjectionOptions>\n\t): Projection {\n\t\tif (Array.isArray(dNode)) {\n\t\t\tthrow new Error(\n\t\t\t\t'Unable to replace a node with an array of nodes. (consider adding one extra level to the virtual DOM)'\n\t\t\t);\n\t\t}\n\t\tconst finalProjectorOptions = getProjectionOptions(projectionOptions);\n\t\tconst decoratedNode = filterAndDecorateChildren(dNode, instance)[0] as InternalVNode;\n\t\tfinalProjectorOptions.rootNode = element.parentNode! as Element;\n\t\tcreateDom(\n\t\t\tdecoratedNode,\n\t\t\ttoParentVNode(finalProjectorOptions.rootNode),\n\t\t\telement,\n\t\t\tfinalProjectorOptions,\n\t\t\tinstance\n\t\t);\n\t\tconst instanceData = widgetInstanceMap.get(instance)!;\n\t\tinstanceData.nodeHandler.addRoot();\n\t\tfinalProjectorOptions.afterRenderCallbacks.push(() => {\n\t\t\tinstanceData.onAttach();\n\t\t});\n\t\trunDeferredRenderCallbacks(finalProjectorOptions);\n\t\trunAfterRenderCallbacks(finalProjectorOptions);\n\t\telement.parentNode!.removeChild(element);\n\t\treturn createProjection(decoratedNode, instance, finalProjectorOptions);\n\t}\n};\n"]}